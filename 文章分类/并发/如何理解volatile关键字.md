# 如何理解volatile关键字
- volatile关键字表示可见性
- 保证被volatile修饰的共享变量对所有的线程可见，也就是当一个线程修改了一被volatile修饰的共享变量的值，新的值总是可以被其他线程立即得知
- 如果修改了一个线程中的一个值，这个值在另一个线程中是表示的运行循环的条件，我们如果在一个线程中使得另一个线程中循环的条件表示为不成立的情况下，另一个线程中的循环其实不一定立即停止执行，因为当我们修改这个值的线程修改值之后，这个值可能还没有被写入到主存档中。但是如果我们给这个条件的标记变量加上了volatile注解，情况就会有所不同，因为volatile关键字保证了可见性，所以当我们修改了这个值之后，这个值会立即被写入到主存档中，这样另一个线程就可以立即得知这个值的变化，从而停止循环。
- 使用volatile修饰的关键字会强制将修改的值立即写进主存
- 使用volatile关键字的话，修改线程进行修改的时候，会导致另一个线程的工作内存中的缓存变量的缓存行无效
- 因为有个循环的那个线程工作内存中缓存的变量变得无效，所以这个线程会再次读取变量的值就回去主存中去读，就实现了强行的同步
- a++这样的操作其实是两个步骤，先增加再赋值，它并不是原子性操作，所以不能保证线程安全